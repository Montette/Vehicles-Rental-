{"version":3,"sources":["js/classes/vehicle.js","js/classes/car.js","js/classes/drone.js","js/fleet-data.js","js/services/data-error.js","js/services/fleet-data-service.js","js/app.js"],"names":["Vehicle","constructor","license","model","latLong","TypeError","Car","make","miles","Drone","base","airTimeHours","getData","fetch","then","response","ok","json","Error","catch","err","console","log","DataError","message","data","FleetDataService","cars","drones","errors","desc","loadData","forEach","item","type","validateDroneData","drone","loadDrone","push","e","validateCarData","car","loadCar","requiredProps","split","isValid","prop","Number","isNaN","parseFloat","getVehicleByProp","value","filter","filterVehicles","key","vehicles","el","Object","keys","some","k","toLowerCase","includes","sortVehicles","mod","vehiclesToSort","sort","x","y","dataService","vehiclesData","myCar","insertCars","input","document","querySelector","addEventListener","event","filterItems","sortButton","sortedVehicles","currentTarget","res","list","createElement","classList","add","appendChild","innerHTML","li","textContent"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAO,MAAMA,OAAN,CAAc;AACjBC,EAAAA,WAAW,CAACC,OAAD,EAAUC,KAAV,EAAiBC,OAAjB,EAA0B;AACjC,QAAG,KAAKH,WAAL,KAAqBD,OAAxB,EAAiC;AAC7B,YAAM,IAAIK,SAAJ,CAAc,yDAAd,CAAN;AACH;;AAAA;AACD,SAAKH,OAAL,GAAeA,OAAf;AACA,SAAKC,KAAL,GAAaA,KAAb;AACA,SAAKC,OAAL,GAAeA,OAAf;AACH;;AARgB;;;;;;;;;;;ACArB;;AAEO,MAAME,GAAN,SAAkBN,gBAAlB,CAA0B;AAC7BC,EAAAA,WAAW,CAACC,OAAD,EAAUC,KAAV,EAAiBC,OAAjB,EAAyB;AAChC,UAAMF,OAAN,EAAeC,KAAf,EAAsBC,OAAtB;AACA,SAAKG,IAAL,GAAY,IAAZ;AACA,SAAKC,KAAL,GAAa,IAAb;AACH;;AAL4B;;;;;;;;;;;ACFjC;;AAGO,MAAMC,KAAN,SAAoBT,gBAApB,CAA4B;AAC/BC,EAAAA,WAAW,CAACC,OAAD,EAAUC,KAAV,EAAiBC,OAAjB,EAAyB;AAChC,UAAMF,OAAN,EAAeC,KAAf,EAAsBC,OAAtB;AACA,SAAKM,IAAL,GAAY,IAAZ;AACA,SAAKC,YAAL,GAAoB,IAApB;AACH;;AAL8B;;;;;;;;;;;ACF5B,MAAMC,OAAO,GAAG,MAAMC,KAAK,CAAC,qDAAD,CAAL,CACxBC,IADwB,CACnBC,QAAQ,IAAI;AACd,MAAGA,QAAQ,CAACC,EAAZ,EAAgB;AACZ,WAAOD,QAAQ,CAACE,IAAT,EAAP;AACH,GAFD,MAEO;AACH,UAAM,IAAIC,KAAJ,EAAN;AACH;AACJ,CAPwB,EAQxBC,KARwB,CAQlBC,GAAG,IAAI;AACVC,EAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACH,CAVwB,CAAtB;;;;;;;;;;;ACDA,MAAMG,SAAN,CAAgB;AACnBtB,EAAAA,WAAW,CAACuB,OAAD,EAAUC,IAAV,EAAe;AACtB,SAAKD,OAAL,GAAeA,OAAf;AACA,SAAKC,IAAL,GAAYA,IAAZ;AACH;;AAJkB;;;;;;;;;;;ACAvB;;AAGA;;AAIA;;AADA;AAKO,MAAMC,gBAAN,CAAuB;AAC1BzB,EAAAA,WAAW,GAAG;AACV,SAAK0B,IAAL,GAAY,EAAZ;AACA,SAAKC,MAAL,GAAc,EAAd;AACA,SAAKC,MAAL,GAAc,EAAd;AACA,SAAKC,IAAL,GAAY,KAAZ;AACH;;AAEDC,EAAAA,QAAQ,CAACN,IAAD,EAAO;AACXA,IAAAA,IAAI,CAACO,OAAL,CAAaC,IAAI,IAAI;AACjB,cAAQA,IAAI,CAACC,IAAb;AACI,aAAK,OAAL;AACA,cAAG,KAAKC,iBAAL,CAAuBF,IAAvB,CAAH,EAAgC;AAC5B,kBAAMG,KAAK,GAAG,KAAKC,SAAL,CAAeJ,IAAf,CAAd;AACA,gBAAIG,KAAJ,EAAW,KAAKR,MAAL,CAAYU,IAAZ,CAAiBF,KAAjB;AACd,WAHD,MAGO;AACH,gBAAIG,CAAC,GAAG,IAAIhB,oBAAJ,CAAc,oBAAd,EAAoCU,IAApC,CAAR;AACA,iBAAKJ,MAAL,CAAYS,IAAZ,CAAiBC,CAAjB;AACH;;AAEG;;AACJ,aAAK,KAAL;AACA,cAAG,KAAKC,eAAL,CAAqBP,IAArB,CAAH,EAA+B;AAC3B,kBAAMQ,GAAG,GAAG,KAAKC,OAAL,CAAaT,IAAb,CAAZ;AACA,gBAAIQ,GAAJ,EAAS,KAAKd,IAAL,CAAUW,IAAV,CAAeG,GAAf;AACZ,WAHD,MAGO;AACH,gBAAIF,CAAC,GAAG,IAAIhB,oBAAJ,CAAc,kBAAd,EAAkCU,IAAlC,CAAR;AACA,iBAAKJ,MAAL,CAAYS,IAAZ,CAAiBC,CAAjB;AACH;;AACG;;AACJ;AACIlB,UAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACA,cAAIiB,CAAC,GAAG,IAAIhB,oBAAJ,CAAc,uBAAd,EAAuCU,IAAvC,CAAR;AACA,eAAKJ,MAAL,CAAYS,IAAZ,CAAiBC,CAAjB;AACA;AAxBR;AA4BH,KA7BD;;AA8BA,SAAI,IAAInB,GAAR,IAAe,KAAKS,MAApB,EAA2B;AACvBR,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACI,OAAhB;AACH;;AACDH,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKK,IAAjB;AACAN,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAKM,MAAjB;AACH;;AAEDc,EAAAA,OAAO,CAACjB,IAAD,EAAO;AACV,QAAI;AACA,YAAM;AACFvB,QAAAA,OADE;AAEFC,QAAAA,KAFE;AAGFC,QAAAA,OAHE;AAIFG,QAAAA,IAJE;AAKFC,QAAAA;AALE,UAMFiB,IANJ;AAOA,YAAMgB,GAAG,GAAG,IAAInC,QAAJ,CAAQJ,OAAR,EAAiBC,KAAjB,EAAwBC,OAAxB,CAAZ;AACAqC,MAAAA,GAAG,CAAClC,IAAJ,GAAWA,IAAX;AACAkC,MAAAA,GAAG,CAACjC,KAAJ,GAAYA,KAAZ;AACA,aAAOiC,GAAP;AACH,KAZD,CAYE,OAAOF,CAAP,EAAU;AACR,WAAKV,MAAL,CAAYS,IAAZ,CAAiB,IAAIf,oBAAJ,CAAc,OAAd,EAAuBE,IAAvB,CAAjB;AACH;;AACD,WAAO,IAAP;AACH;;AAEDY,EAAAA,SAAS,CAACZ,IAAD,EAAO;AACZ,QAAI;AACA,YAAM;AACFvB,QAAAA,OADE;AAEFC,QAAAA,KAFE;AAGFC,QAAAA,OAHE;AAIFO,QAAAA,YAJE;AAKFD,QAAAA;AALE,UAMFe,IANJ;AAOA,YAAMW,KAAK,GAAG,IAAI3B,YAAJ,CAAUP,OAAV,EAAmBC,KAAnB,EAA0BC,OAA1B,CAAd;AACAgC,MAAAA,KAAK,CAACzB,YAAN,GAAqBA,YAArB;AACAyB,MAAAA,KAAK,CAAC1B,IAAN,GAAaA,IAAb;AACA,aAAO0B,KAAP;AACH,KAZD,CAYE,OAAOG,CAAP,EAAU;AACR,WAAKV,MAAL,CAAYS,IAAZ,CAAiB,IAAIf,oBAAJ,CAAc,OAAd,EAAuBE,IAAvB,CAAjB;AACH;;AACD,WAAO,IAAP;AACH;;AAEDU,EAAAA,iBAAiB,CAACC,KAAD,EAAQ;AACrB,UAAMO,aAAa,GAAG,0CAA0CC,KAA1C,CAAgD,GAAhD,CAAtB;AACA,QAAIC,OAAO,GAAG,IAAd;AACAF,IAAAA,aAAa,CAACX,OAAd,CAAsBc,IAAI,IAAI;AAC1B,UAAG,CAACV,KAAK,CAACU,IAAD,CAAT,EAAiB;AACb,aAAKjB,MAAL,CAAYS,IAAZ,CAAiB,IAAIf,oBAAJ,CAAe,iBAAgBuB,IAAK,EAApC,EAAuCV,KAAvC,CAAjB;AACCS,QAAAA,OAAO,GAAG,KAAV;AACJ;AACJ,KALD;;AAOA,QAAGE,MAAM,CAACC,KAAP,CAAaD,MAAM,CAACE,UAAP,CAAkBb,KAAK,CAACzB,YAAxB,CAAb,CAAH,EAAwD;AACpD,WAAKkB,MAAL,CAAYS,IAAZ,CAAiB,IAAIf,oBAAJ,CAAe,iBAAgBa,KAAK,CAACzB,YAAa,EAAlD,EAAqDyB,KAArD,CAAjB;AACAf,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKO,MAAL,CAAY,CAAZ,EAAeL,OAA3B;AACAqB,MAAAA,OAAO,GAAG,KAAV;AACH;;AACD,WAAOA,OAAP;AACH;;AAEDL,EAAAA,eAAe,CAACC,GAAD,EAAM;AACjB,UAAME,aAAa,GAAG,mCAAmCC,KAAnC,CAAyC,GAAzC,CAAtB;AACA,QAAIC,OAAO,GAAG,IAAd;AACAF,IAAAA,aAAa,CAACX,OAAd,CAAsBc,IAAI,IAAI;AAC1B,UAAG,CAACL,GAAG,CAACK,IAAD,CAAP,EAAe;AACX,aAAKjB,MAAL,CAAYS,IAAZ,CAAiB,IAAIf,oBAAJ,CAAe,iBAAgBuB,IAAK,EAApC,EAAuCL,GAAvC,CAAjB;AACCI,QAAAA,OAAO,GAAG,KAAV;AACJ;AACJ,KALD;;AAOA,QAAGE,MAAM,CAACC,KAAP,CAAaD,MAAM,CAACE,UAAP,CAAkBR,GAAG,CAACjC,KAAtB,CAAb,CAAH,EAA+C;AAC3C,WAAKqB,MAAL,CAAYS,IAAZ,CAAiB,IAAIf,oBAAJ,CAAe,iBAAgBkB,GAAG,CAACjC,KAAM,EAAzC,EAA4CiC,GAA5C,CAAjB;AACApB,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKO,MAAL,CAAY,CAAZ,EAAeL,OAA3B;AACAqB,MAAAA,OAAO,GAAG,KAAV;AACH;;AACD,WAAOA,OAAP;AACH;;AAEDK,EAAAA,gBAAgB,CAAChB,IAAD,EAAOY,IAAP,EAAaK,KAAb,EAAoB;AAChC,WAAO,KAAKjB,IAAL,EAAWkB,MAAX,CAAkBnB,IAAI,IAAIA,IAAI,CAACa,IAAD,CAAJ,KAAeK,KAAzC,CAAP;AACH,GA1HyB,CA4H1B;AACA;AACA;AAEA;AACA;AACA;;;AAEAE,EAAAA,cAAc,CAACC,GAAD,EAAMH,KAAN,EAAa;AACvB,QAAII,QAAQ,GAAGD,GAAG,KAAK,MAAR,GAAiB,cAAjB,GAAkC,gBAAjD;AACA,SAAKC,QAAL,IAAiB,KAAKD,GAAL,EAAUF,MAAV,CAAiBI,EAAE,IAAI;AACpC,aAAOC,MAAM,CAACC,IAAP,CAAYF,EAAZ,EAAgBG,IAAhB,CAAqBC,CAAC,IAAIJ,EAAE,CAACI,CAAD,CAAF,CAAMC,WAAN,GAAoBC,QAApB,CAA6BX,KAAK,CAACU,WAAN,EAA7B,CAA1B,CAAP;AAEC,KAHY,CAAjB;AAII,WAAO,KAAKN,QAAL,CAAP;AACH;;AAELQ,EAAAA,YAAY,CAACT,GAAD,EAAMH,KAAN,EAAa;AACrB;AAEA,QAAIa,GAAG,GAAG,KAAKlC,IAAL,GAAY,CAAC,CAAb,GAAiB,CAA3B;AACA,QAAIyB,QAAQ,GAAGD,GAAG,KAAK,MAAR,GAAiB,cAAjB,GAAkC,gBAAjD;AACA,QAAIW,cAAc,GAAG,KAAKV,QAAL,IAAiB,KAAKA,QAAL,CAAjB,GAAkC,KAAKD,GAAL,CAAvD;AACA,WAAOW,cAAc,CAACC,IAAf,CAAoB,CAACC,CAAD,EAAIC,CAAJ,KAAU;AACjC,WAAKtC,IAAL,GAAY,CAAC,KAAKA,IAAlB;AACA,UAAGqC,CAAC,CAAChB,KAAD,CAAD,GAAWiB,CAAC,CAACjB,KAAD,CAAf,EAAwB,OAAO,CAAC,CAAD,GAAKa,GAAZ;AACxB,UAAGG,CAAC,CAAChB,KAAD,CAAD,GAAWiB,CAAC,CAACjB,KAAD,CAAf,EAAwB,OAAO,IAAIa,GAAX;AAExB,aAAO,CAAP;AACH,KANM,CAAP;AAOH;;AA1JyB;;;;;;ACX9B;;AAGA;;AAGA;;AAGA;;AAGA,IAAIvB,GAAG,GAAG,IAAInC,QAAJ,EAAV;AACA,IAAI8B,KAAK,GAAG,IAAI3B,YAAJ,EAAZ;AAGA,IAAI4D,WAAW,GAAG,IAAI3C,kCAAJ,EAAlB,EAGA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA;AAEA;;AAMA,0BAAUZ,IAAV,CAAeW,IAAI,IAAI4C,WAAW,CAACtC,QAAZ,CAAqBN,IAArB,CAAvB,EAAmDX,IAAnD,CAAwD,MAAMwD,YAAY,EAA1E;;AAGA,SAASA,YAAT,GAAwB;AAEpB,QAAMC,KAAK,GAAGF,WAAW,CAACnB,gBAAZ,CAA6B,MAA7B,EAAoC,SAApC,EAA+C,QAA/C,CAAd;AACA7B,EAAAA,OAAO,CAACC,GAAR,CAAYiD,KAAZ;AACAlD,EAAAA,OAAO,CAACC,GAAR,CAAY+C,WAAW,CAACnB,gBAAZ,CAA6B,QAA7B,EAAsC,MAAtC,EAA8C,UAA9C,CAAZ;AAEAsB,EAAAA,UAAU,CAACH,WAAW,CAAC1C,IAAb,CAAV;AAEA,QAAM8C,KAAK,GAAGC,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAd;AACAF,EAAAA,KAAK,CAACG,gBAAN,CAAuB,OAAvB,EAAiCC,KAAD,IAAW;AACxCC,IAAAA,WAAW,CAACD,KAAD,CAAX;AACF,GAFD;AAIA,QAAME,UAAU,GAAGL,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAnB;AACAI,EAAAA,UAAU,CAACH,gBAAX,CAA4B,OAA5B,EAAqCb,YAArC;AAGH;;AAAA;;AAID,SAASA,YAAT,GAAwB;AACpB,MAAIiB,cAAc,GAAGX,WAAW,CAACN,YAAZ,CAAyB,MAAzB,EAAiC,OAAjC,CAArB;AACAS,EAAAA,UAAU,CAACQ,cAAD,CAAV;AACH;;AAGD,SAASF,WAAT,CAAqBD,KAArB,EAA4B;AACxB,MAAI1B,KAAK,GAAG0B,KAAK,CAACI,aAAN,CAAoB9B,KAAhC;AACA9B,EAAAA,OAAO,CAACC,GAAR,CAAY6B,KAAZ;AACA,MAAI+B,GAAG,GAAGb,WAAW,CAAChB,cAAZ,CAA2B,MAA3B,EAAmCF,KAAnC,CAAV;AACA9B,EAAAA,OAAO,CAACC,GAAR,CAAY4D,GAAZ;AACAV,EAAAA,UAAU,CAACU,GAAD,CAAV,CALwB,CAMxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEH;;AACD,SAASV,UAAT,CAAoB7C,IAApB,EAA0B;AACtB,MAAIwD,IAAJ;;AACA,MAAG,CAACT,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAJ,EAA2C;AAC3CQ,IAAAA,IAAI,GAAGT,QAAQ,CAACU,aAAT,CAAuB,IAAvB,CAAP;AACAD,IAAAA,IAAI,CAACE,SAAL,CAAeC,GAAf,CAAmB,UAAnB;AACAZ,IAAAA,QAAQ,CAACC,aAAT,CAAuB,YAAvB,EAAqCY,WAArC,CAAiDJ,IAAjD;AACC,GAJD,MAIO;AACHA,IAAAA,IAAI,GAAGT,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAP;AACH;;AACDQ,EAAAA,IAAI,CAACK,SAAL,GAAiB,EAAjB;AACA7D,EAAAA,IAAI,CAACK,OAAL,CAAaS,GAAG,IAAI;AAChB,UAAMgD,EAAE,GAAGf,QAAQ,CAACU,aAAT,CAAuB,IAAvB,CAAX;AACAK,IAAAA,EAAE,CAACC,WAAH,GAAkB,SAAQjD,GAAG,CAAClC,IAAK,YAAWkC,GAAG,CAACtC,KAAM,cAAasC,GAAG,CAACvC,OAAQ,EAAjF;AACAiF,IAAAA,IAAI,CAACI,WAAL,CAAiBE,EAAjB;AACH,GAJD;AAMH;;AAAA","file":"app.c3f9f951.map","sourceRoot":"..\\src","sourcesContent":["export class Vehicle {\r\n    constructor(license, model, latLong) {\r\n        if(this.constructor === Vehicle) {\r\n            throw new TypeError(\"Abstract Vehicle class cannot be instantiated directly.\")\r\n        };\r\n        this.license = license;\r\n        this.model = model;\r\n        this.latLong = latLong;\r\n    }\r\n}","import {Vehicle} from './vehicle.js';\r\n\r\nexport class Car extends Vehicle {\r\n    constructor(license, model, latLong){\r\n        super(license, model, latLong);\r\n        this.make = null;\r\n        this.miles = null;\r\n    }\r\n}","import {Vehicle} from './vehicle.js';\r\n\r\n\r\nexport class Drone extends Vehicle {\r\n    constructor(license, model, latLong){\r\n        super(license, model, latLong);\r\n        this.base = null;\r\n        this.airTimeHours = null;\r\n    }\r\n}","\r\nexport const getData = () => fetch('https://vehicles-989f1.firebaseio.com/vehicles.json')\r\n    .then(response => {\r\n        if(response.ok) {\r\n            return response.json()\r\n        } else {\r\n            throw new Error();\r\n        }\r\n    })\r\n    .catch(err => {\r\n        console.log(err);\r\n    })","export class DataError {\r\n    constructor(message, data){\r\n        this.message = message;\r\n        this.data = data;\r\n    }\r\n}","import {\r\n    Car\r\n} from '../classes/car.js';\r\nimport {\r\n    Drone\r\n} from '../classes/drone.js';\r\n// import {getData} from '../fleet-data';\r\nimport {\r\n    DataError\r\n} from './data-error.js';\r\n\r\nexport class FleetDataService {\r\n    constructor() {\r\n        this.cars = [];\r\n        this.drones = [];\r\n        this.errors = [];\r\n        this.desc = false;\r\n    }\r\n\r\n    loadData(data) {\r\n        data.forEach(item => {\r\n            switch (item.type) {\r\n                case 'drone':\r\n                if(this.validateDroneData(item)){\r\n                    const drone = this.loadDrone(item);\r\n                    if (drone) this.drones.push(drone);\r\n                } else {\r\n                    let e = new DataError('invalid drone data', item);\r\n                    this.errors.push(e);\r\n                }\r\n                  \r\n                    break;\r\n                case 'car':\r\n                if(this.validateCarData(item)) {\r\n                    const car = this.loadCar(item);\r\n                    if (car) this.cars.push(car);\r\n                } else {\r\n                    let e = new DataError('invalid car data', item);\r\n                    this.errors.push(e);\r\n                }\r\n                    break;\r\n                default:\r\n                    console.log('wrong type of vehicle');\r\n                    let e = new DataError('wrong type of vehicle', item);\r\n                    this.errors.push(e);\r\n                    break;\r\n            }\r\n\r\n       \r\n        });\r\n        for(let err of this.errors){\r\n            console.log(err.message)\r\n        }\r\n        console.log(this.cars);\r\n        console.log(this.drones);\r\n    }\r\n\r\n    loadCar(data) {\r\n        try {\r\n            const {\r\n                license,\r\n                model,\r\n                latLong,\r\n                make,\r\n                miles\r\n            } = data;\r\n            const car = new Car(license, model, latLong);\r\n            car.make = make;\r\n            car.miles = miles;\r\n            return car;\r\n        } catch (e) {\r\n            this.errors.push(new DataError('error', data));\r\n        }\r\n        return null\r\n    }\r\n\r\n    loadDrone(data) {\r\n        try {\r\n            const {\r\n                license,\r\n                model,\r\n                latLong,\r\n                airTimeHours,\r\n                base\r\n            } = data;\r\n            const drone = new Drone(license, model, latLong);\r\n            drone.airTimeHours = airTimeHours;\r\n            drone.base = base;\r\n            return drone;\r\n        } catch (e) {\r\n            this.errors.push(new DataError('error', data));\r\n        }\r\n        return null;\r\n    }\r\n\r\n    validateDroneData(drone) {\r\n        const requiredProps = 'license model latLong base airTimeHours'.split(' ');\r\n        let isValid = true;\r\n        requiredProps.forEach(prop => {\r\n            if(!drone[prop]) {\r\n                this.errors.push(new DataError(`invalid field ${prop}`, drone));\r\n                 isValid = false;\r\n            }\r\n        });\r\n\r\n        if(Number.isNaN(Number.parseFloat(drone.airTimeHours))) {\r\n            this.errors.push(new DataError(`invalid field ${drone.airTimeHours}`, drone));\r\n            console.log(this.errors[0].message);\r\n            isValid = false;\r\n        }\r\n        return isValid;\r\n    }\r\n\r\n    validateCarData(car) {\r\n        const requiredProps = 'license model latLong make miles'.split(' ');\r\n        let isValid = true;\r\n        requiredProps.forEach(prop => {\r\n            if(!car[prop]) {\r\n                this.errors.push(new DataError(`invalid field ${prop}`, car));\r\n                 isValid = false;\r\n            }\r\n        });\r\n\r\n        if(Number.isNaN(Number.parseFloat(car.miles))) {\r\n            this.errors.push(new DataError(`invalid field ${car.miles}`, car));\r\n            console.log(this.errors[0].message);\r\n            isValid = false;\r\n        }\r\n        return isValid;\r\n    }\r\n\r\n    getVehicleByProp(type, prop, value) {\r\n        return this[type].filter(item => item[prop] === value)\r\n    }\r\n\r\n    // getCarByProp(prop, value) {\r\n    //     return this.cars.filter(car => car[prop] === value);\r\n    // }\r\n\r\n    // getDroneByProp(prop, value) {\r\n    //     return this.drones.filter(drone => drone[prop] === value);\r\n    // }\r\n\r\n    filterVehicles(key, value) {\r\n        let vehicles = key === 'cars' ? 'filteredCars' : 'filteredDrones';\r\n        this[vehicles] = this[key].filter(el => {\r\n            return Object.keys(el).some(k => el[k].toLowerCase().includes(value.toLowerCase()))\r\n\r\n            });\r\n            return this[vehicles];\r\n        } \r\n\r\n    sortVehicles(key, value) {\r\n        // let vehiclesToSort = this.filterVehicles(key, value);\r\n       \r\n        var mod = this.desc ? -1 : 1;\r\n        let vehicles = key === 'cars' ? 'filteredCars' : 'filteredDrones';\r\n        let vehiclesToSort = this[vehicles] ? this[vehicles] : this[key];\r\n        return vehiclesToSort.sort((x, y) => {\r\n            this.desc = !this.desc;\r\n            if(x[value] < y[value]) return -1 * mod;\r\n            if(x[value] > y[value]) return 1 * mod;\r\n            \r\n            return 0;\r\n        })\r\n    }\r\n}","import {\r\n    Car\r\n} from './classes/car.js';\r\nimport {\r\n    Drone\r\n} from './classes/drone.js';\r\nimport {\r\n    getData\r\n} from './fleet-data.js';\r\nimport {\r\n    FleetDataService\r\n} from './services/fleet-data-service.js';\r\nlet car = new Car();\r\nlet drone = new Drone();\r\n\r\n\r\nlet dataService = new FleetDataService();\r\n\r\n\r\n// async function vehiclesData() {\r\n//     getData().then(data => dataService.loadData(data));\r\n//     const request = getData();\r\n//     const data = await request;\r\n//     console.log(data);\r\n\r\n\r\n//     const myCar = dataService.getCarByProp('license', \"AT2000\");\r\n//     console.log(myCar);\r\n//     console.log(dataService.getCarByProp('make', 'Uber'));\r\n\r\n//     const list = document.createElement('ul');\r\n//     document.querySelector('.container').appendChild(list);\r\n\r\n//     function insertCars(cars) {\r\n\r\n//         list.innerHTML = '';\r\n//         cars.forEach(car => {\r\n//             const li = document.createElement('li');\r\n//             li.textContent = `Make: ${car.make}, model: ${car.model}, license: ${car.license}`;\r\n//             list.appendChild(li);\r\n//         })\r\n\r\n//     };\r\n\r\n//     insertCars(dataService.cars);\r\n\r\n//     const input = document.querySelector('input');\r\n\r\n//     input.addEventListener('keyup', (event) => {\r\n//         let value = event.currentTarget.value;\r\n//         console.log(value);\r\n//         let res = dataService.filterVehicles(value);\r\n//         // console.log(res);\r\n//         // insertCars(res);\r\n//         const items = document.querySelectorAll('li');\r\n//         items.forEach(item => {\r\n//             if(item.textContent.toLowerCase().includes(value)) {\r\n//                 item.style.display = \"\"\r\n//             } else {\r\n//                 item.style.display = 'none';\r\n//             }\r\n//         })\r\n\r\n//     })\r\n\r\n\r\n\r\n// };\r\n\r\n// vehiclesData();\r\n\r\n\r\n\r\n\r\n\r\ngetData().then(data => dataService.loadData(data)).then(() => vehiclesData());\r\n\r\n\r\nfunction vehiclesData() {\r\n\r\n    const myCar = dataService.getVehicleByProp('cars','license', \"AT2000\");\r\n    console.log(myCar);\r\n    console.log(dataService.getVehicleByProp('drones','base', 'New York'));\r\n \r\n    insertCars(dataService.cars);\r\n\r\n    const input = document.querySelector('input');\r\n    input.addEventListener('keyup', (event) => {\r\n       filterItems(event);\r\n    });\r\n\r\n    const sortButton = document.querySelector('.sort');\r\n    sortButton.addEventListener('click', sortVehicles)\r\n\r\n\r\n};\r\n\r\n\r\n\r\nfunction sortVehicles() {\r\n    let sortedVehicles = dataService.sortVehicles('cars', 'model');\r\n    insertCars(sortedVehicles)\r\n}\r\n\r\n\r\nfunction filterItems(event) {\r\n    let value = event.currentTarget.value;\r\n    console.log(value);\r\n    let res = dataService.filterVehicles('cars', value);\r\n    console.log(res);\r\n    insertCars(res);\r\n    // const items = document.querySelectorAll('li');\r\n    // items.forEach(item => {\r\n    //     if (item.textContent.toLowerCase().includes(value)) {\r\n    //         item.style.display = \"\"\r\n    //     } else {\r\n    //         item.style.display = 'none';\r\n    //     }\r\n    // })\r\n\r\n}\r\nfunction insertCars(cars) {\r\n    let list;\r\n    if(!document.querySelector('ul.car-list')) {\r\n    list = document.createElement('ul');\r\n    list.classList.add('car-list');\r\n    document.querySelector('.container').appendChild(list);\r\n    } else {\r\n        list = document.querySelector('ul.car-list');\r\n    }\r\n    list.innerHTML = '';\r\n    cars.forEach(car => {\r\n        const li = document.createElement('li');\r\n        li.textContent = `Make: ${car.make}, model: ${car.model}, license: ${car.license}`;\r\n        list.appendChild(li);\r\n    })\r\n\r\n};"]}